# 2.3 数据时序同步说明（当前实现与限制）

本章描述 2.3 数据采集链路中“如何对齐同一控制周期的数据”，以及当前实现的限制与可改进方向。

## 1. 同步目标

在每个 control tick，尽量让以下数据能在同一时间轴上对齐：
- 三相机图像（exterior/right-wrist/left-wrist）最近 `Timg=2` 帧
- 双臂 proprio（关节/末端等，写入 unified 128 + mask）
- 当前动作 action（写入 unified 128 + mask）

## 2. 当前实现（代码映射）

主循环：`RDT/collect_rdt_dataset_teleop.py`

- 单一循环驱动：每个 tick 顺序执行“读输入 → 读状态 → 取图像 → 写 step”。
- 时间戳：写入 `timestamps_unix_s`（Unix 秒）。
- 图像堆叠：每个 tick 保存最近 `Timg=2` 帧（不足则 padding）。

## 3. 已知限制（在报告里必须说明）

- 多相机为软件顺序读取：跨相机存在毫秒级偏差（非硬触发）。
- 图像与关节状态并非同一时刻采样：受采集顺序与 USB/串口抖动影响。

## 4. 可改进方向（不改变数据格式的前提下）

- 为每路相机单独记录帧级时间戳（每帧一个 timestamp），并在 HDF5 中额外保存。
- 多线程/异步采集相机，主线程按时间最近邻对齐。
- 使用硬件触发同步相机（最严格），或使用同一同步信号写入日志。
